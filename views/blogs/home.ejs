<% layout('layouts/boilerplate') %>
<body>
  <header class="py-5 bg-light border-bottom mb-4">
    <div class="container">
      <div class="text-center my-5">
        <h1 class="fw-bolder">Welcome to Blog Home!</h1>
        <p class="lead mb-0">
          A Bootstrap 5 starter layout for your next blog homepage
        </p>
      </div>
    </div>
  </header>
  <!-- Page content-->
  <div class="container">
    <div class="row">
      <!-- Blog entries-->
      <div class="col-lg-8">
        <!-- First featured blog post-->
        <% if(blogs.length > 0) { %>
        <div class="card mb-4">
          <a href="#!">
            <img
              class="card-img-top"
              src="https://dummyimage.com/850x350/dee2e6/6c757d.jpg"
              alt="..."
            />
          </a>
          <div class="card-body">
            <div class="small text-muted">
              <%= blogs[0].posted_date.toDateString() %>
            </div>
            <h2 class="card-title"><%= blogs[0].title %></h2>
            <p class="card-text"><%= blogs[0].text.slice(0, 100) %>...</p>
            <a class="btn btn-primary" href="/blogs/<%= blogs[0]._id%>"
              >Read more →</a
            >
          </div>
        </div>
        <% } %>
        <!-- Next four blog posts in two columns -->
        <div class="row">
          <% for(let i = 1; i < blogs.length; i++) { %> <% if (i < 5) { %>
          <div class="col-lg-6">
            <div class="card mb-4 border-0">
              <a href="#!">
                <img
                  class="card-img-top"
                  src="https://dummyimage.com/700x350/dee2e6/6c757d.jpg"
                  alt="..."
                />
              </a>
              <div class="card-body">
                <div class="small text-muted">
                  <%= blogs[i].posted_date.toDateString() %>
                </div>
                <h2 class="card-title h4"><%= blogs[i].title %></h2>
                <p class="card-text"><%= blogs[i].text.slice(0, 100) %>...</p>
                <a class="btn btn-primary" href="/blogs/<%= blogs[i]._id%>"
                  >Read more →</a
                >
              </div>
            </div>
          </div>
          <% } else { %> <% break; %> <% } %> <% } %>
        </div>
      </div>
      <!-- Side widgets-->
      <div class="col-lg-4">
        <!-- Search widget-->
        <div class="card mb-4">
          <div class="card-header">Search</div>
          <div class="card-body">
            <div class="input-group">
              <input
                class="form-control"
                type="text"
                placeholder="Enter search term..."
                aria-label="Enter search term..."
                aria-describedby="button-search"
              />
              <button class="btn btn-primary" id="button-search" type="button">
                Go!
              </button>
            </div>
          </div>
        </div>
        <!-- Categories widget-->
        <div class="card mb-4">
          <div class="card-header">Categories</div>
          <div class="card-body">
            <div class="row">
              <div class="col-sm-6">
                <ul class="list-unstyled mb-0">
                  <li><a href="#!">Web Design</a></li>
                  <li><a href="#!">HTML</a></li>
                  <li><a href="#!">Freebies</a></li>
                </ul>
              </div>
              <div class="col-sm-6">
                <ul class="list-unstyled mb-0">
                  <li><a href="#!">JavaScript</a></li>
                  <li><a href="#!">CSS</a></li>
                  <li><a href="#!">Tutorials</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!-- Side widget-->
        <div class="card mb-4">
          <div class="card-header">Side Widget</div>
          <div class="card-body">
            You can put anything you want inside of these side widgets. They are
            easy to use, and feature the Bootstrap 5 card component!
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination-->
  <nav aria-label="Pagination">
    <hr class="my-0" />
    <ul class="pagination justify-content-center my-4">
      <% if (currentPage > 1) { %>
      <li class="page-item">
        <a
          class="page-link"
          href="/blogs?page=<%= currentPage - 1 %>"
          tabindex="-1"
          >Newer</a
        >
      </li>
      <% } %> <% for (let i = 1; i <= totalPages; i++) { %>
      <li
        class="page-item <%= i === currentPage ? 'active' : '' %>"
        aria-current="page"
      >
        <a class="page-link" href="/blogs?page=<%= i %>"><%= i %></a>
      </li>
      <% } %> <% if (currentPage < totalPages) { %>
      <li class="page-item">
        <a class="page-link" href="/blogs?page=<%= currentPage + 1 %>">Older</a>
      </li>
      <% } %>
    </ul>
  </nav>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/public/js/scripts.js"></script>
</body>
